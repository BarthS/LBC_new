%h2
  recherche de "
  = @recherche
  "

- def dice_coefficient(a, b)
  - a_bigrams = a.each_char.each_cons(2).to_set
  - b_bigrams = b.each_char.each_cons(2).to_set
  - overlap = (a_bigrams & b_bigrams).size
  - total = a_bigrams.size + b_bigrams.size
  - dice  = overlap * 2.0 / total
  - dice

- h = Hash.new
- @posts.each do |p|
  - h[p.id] = dice_coefficient(p.text,@recherche) + 1.5 * dice_coefficient(p.title,@recherche)
  %p

- tri = h.sort_by { |key, value| value}

.list-group
  - tri.reverse.each do |key, value|
    - if value > 0.0
      - @posts.each do |p|
        - if p.id == key
          .list-group-item
            = image_tag p.image1.url(:square), width: "50px", height: "50px", class: "img-rounded"

            .col-md-2
              = p.title
            .col-md-2
              = p.price
              = "â‚¬"

            %a.col-md-2{href: "/posts/#{p.id}"}
              .glyphicon.glyphicon-user.h4.pull-right
            %br

:css
  .col-md-2 {
      float:none;
      display:inline-block;
      vertical-align:middle;
  }
